<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>X-MEN RACER PRO</title>
    <style>
        body { margin: 0; background: #111; overflow: hidden; font-family: sans-serif; touch-action: none; }
        canvas { display: block; margin: 0 auto; background: #2c3e50; border-left: 10px solid #f1c40f; border-right: 10px solid #f1c40f; }
        .stats { position: absolute; top: 10px; width: 100%; text-align: center; color: white; font-weight: bold; text-shadow: 2px 2px 4px #000; pointer-events: none; }
    </style>
</head>
<body>
    <div class="stats">SCORE: <span id="score">0</span></div>
    <canvas id="game"></canvas>

    <script>
        const canvas = document.getElementById('game');
        const ctx = canvas.getContext('2d');
        canvas.width = Math.min(window.innerWidth, 400);
        canvas.height = window.innerHeight;

        let score = 0;
        let speed = 6;
        let player = { x: canvas.width/2 - 25, y: canvas.height - 120, w: 50, h: 90 };
        let enemies = [];

        function drawRoad() {
            ctx.strokeStyle = "white";
            ctx.setLineDash([20, 20]);
            ctx.beginPath();
            ctx.moveTo(canvas.width/2, 0);
            ctx.lineTo(canvas.width/2, canvas.height);
            ctx.stroke();
        }

        function spawnEnemy() {
            if (Math.random() < 0.03) {
                let lane = Math.random() < 0.5 ? canvas.width/4 - 25 : (canvas.width*3/4) - 25;
                enemies.push({ x: lane, y: -100, w: 50, h: 90 });
            }
        }

        function update() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawRoad();
          
            ctx.fillStyle = "#f1c40f";
            ctx.fillRect(player.x, player.y, player.w, player.h);

            enemies.forEach((en, i) => {
                en.y += speed;
                ctx.fillStyle = "#e74c3c"; 
                ctx.fillRect(en.x, en.y, en.w, en.h);

                if (en.y > canvas.height) {
                    enemies.splice(i, 1);
                    score += 10;
                    document.getElementById('score').innerText = score;
                    if(score % 100 === 0) speed += 0.5;
                }

                if (player.x < en.x + en.w && player.x + player.w > en.x && player.y < en.y + en.h && player.y + player.h > en.y) {
                    alert("Game Over! Score: " + score);
                    location.reload();
                }
            });

            spawnEnemy();
            requestAnimationFrame(update);
        }

        window.addEventListener('touchstart', e => {
            if (e.touches[0].clientX < window.innerWidth/2) player.x = canvas.width/4 - 25;
            else player.x = (canvas.width*3/4) - 25;
        });

        update();
    </script>
</body>
</html>
